<!DOCTYPE html><html lang="en" data-reactroot=""><head><meta charset="utf-8"/><meta name="theme-color" content="#2B3A42"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>To v2 or v3 from v1 | webpack</title><meta name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:site_name" content="webpack"/><meta property="og:type" content="website"/><meta property="og:title" content="To v2 or v3 from v1 | webpack"/><meta property="og:description" name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:image" content="https://webpack.js.org/dcd5e077cf9f54ebe52d4f7ebe8c3080.png"/><meta property="twitter:card" content="summary"/><meta property="twitter:site" content="@webpack"/><meta property="twitter:creator" content="@webpack"/><meta property="twitter:domain" content="https://webpack.js.org/"/><link rel="icon" type="image/x-icon" href="../../bc3effb418df77da9e04825c48a58a49.ico"/><link rel="stylesheet" href="../../4ab073590147cad678f0.css"/><link rel="stylesheet" href="../../fb3c6085eb82c89290f8.css"/><link rel="manifest" href="../../manifest.json"/><link rel="canonical" href="index.html"/><meta name="mobile-web-app-capable" content="yes"/><link rel="icon" sizes="192x192" href="../../icon_192x192.png"/><link rel="icon" sizes="512x512" href="../../icon_512x512.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="webpack"/><link rel="apple-touch-icon-precomposed" href="../../icon_180x180.png"/><link rel="mask-icon" href="../../aad9d51e01a0dcc2caf5bee43dc8e647.svg" color="#465e69"/><meta name="msapplication-TileImage" content="/icon_150x150.png"/><meta name="msapplication-TileColor" content="#465e69"/></head><body><div id="root"><div class="site"><div class="site__header"><div class="notification-bar"><div class="container notification-bar__inner"><p>Sponsor webpack and get apparel from the <a href="https://webpack.threadless.com">official shop</a>! All proceeds go to our <a href="https://opencollective.com/webpack">open collective</a>!</p></div></div><header class="navigation   "><section class="navigation__inner"><button aria-label="Open menu" class="navigation__mobile"><svg viewBox="-62 138 25 25"><g><g><path d="M-60.2,140.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,141-61.2,140.2-60.2,140.2z"></path><path d="M-60.2,148.7h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,149.5-61.2,148.7-60.2,148.7z"></path><path d="M-60.2,157.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,158-61.2,157.2-60.2,157.2z"></path></g></g></svg></button><a class="navigation__logo" href="../../index.html"><img class="logo" src="../../e0b5805d423a4ec9473ee315250968b2.svg" alt="webpack logo"/></a><nav class="navigation__items"><a class="navigation__item  navigation__item--active" href="../../concepts/index.html">Documentation</a><a class="navigation__item  " href="../../contribute/index.html">Contribute</a><a class="navigation__item  " href="../../vote/index.html">Vote</a><a href="https://medium.com/webpack" target="_blank" rel="noopener" class="navigation__item  ">Blog</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener" title="GitHub Repository" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-github"></i></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener" title="webpack on Twitter" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-twitter"></i></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener" title="webpack on Stack Overflow" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-stack-overflow"></i></a><span class="navigation__item navigation__item--icon"><nav class="dropdown navigation__languages"><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><img class="dropdown__language" alt="select language" src="../../57c717e75066b659cfe19dc2a643153c.svg"/><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="../../index.html"><span>English</span></a></li><li><a href="https://webpack.docschina.org/"><span lang="zh">中文</span></a></li></ul></div></nav></span></nav><div class="navigation-search "><input type="text" class="navigation-search__input" placeholder="Search this site..." value=""/><button aria-label="Hide search box" class="navigation-search__icon navigation-search__clear"><svg viewBox="-137 138 25 25"><g transform="translate(0,-952.36218)"><path d="M-131.3,1094.4c-0.4,0-0.9,0.1-1.2,0.5c-0.7,0.7-0.7,1.7,0,2.4l5.6,5.6l-5.6,5.6c-0.7,0.7-0.7,1.7,0,2.4 c0.7,0.7,1.7,0.7,2.4,0l5.6-5.6l5.6,5.6c0.7,0.7,1.7,0.7,2.4,0c0.7-0.7,0.7-1.7,0-2.4l-5.6-5.6l5.6-5.6c0.7-0.7,0.7-1.7,0-2.4 c-0.7-0.7-1.7-0.7-2.4,0l-5.6,5.6l-5.6-5.6C-130.5,1094.5-130.9,1094.4-131.3,1094.4L-131.3,1094.4z"></path></g></svg></button><button aria-label="Show search box" class="navigation-search__icon navigation-search__search"><svg viewBox="-137 138 25 25"><g><path d="M-114.6,162.6l-7.5-7.5c-0.6-0.6-0.6-1.6,0-2.1l0,0c0.6-0.6,1.6-0.6,2.1,0l7.5,7.5c0.6,0.6,0.6,1.6,0,2.1l0,0 C-113,163.1-114,163.1-114.6,162.6z"></path><path d="M-134.1,140.9c-3.9,3.9-3.9,10.2,0,14.1s10.2,3.9,14.1,0s3.9-10.2,0-14.1S-130.2,137-134.1,140.9z M-122.1,153 c-2.7,2.7-7.1,2.7-9.8,0s-2.7-7.1,0-9.8s7.1-2.7,9.8,0C-119.4,145.9-119.4,150.2-122.1,153z"></path></g></svg></button></div></section><div class="navigation-sub"><div class="navigation-sub__inner"><a class="navigation-sub__link " title="guides" content="guides" href="../../guides/index.html">guides</a><a class="navigation-sub__link " title="api" content="api" href="../../api/index.html">api</a><a class="navigation-sub__link " title="plugins" content="plugins" href="../../plugins/index.html">plugins</a><a class="navigation-sub__link " title="concepts" content="concepts" href="../../concepts/index.html">concepts</a><a class="navigation-sub__link " title="configuration" content="configuration" href="../../configuration/index.html">configuration</a><a class="navigation-sub__link navigation-sub__link--active" title="migrate" content="migrate" href="../index.html">migrate</a><a class="navigation-sub__link " title="loaders" content="loaders" href="../../loaders/index.html">loaders</a></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener" class="sponsors__content"><img src="../../bf176a25b4f8227fea804854c98dc5e2.png"/><img src="../../d19378a95ebe6b15d5ddea281138dcf4.svg" style="width:100px"/><div style="margin-top:1em;font-size:2em;text-align:center;color:#535353">ag-grid is proud to partner with webpack</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="sidebar__shields"><a href="https://github.com/webpack/webpack/releases"><img alt="webpack shield" src="https://img.shields.io/github/package-json/v/webpack/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600"/></a></div><div class="sidebar-item sidebar-item--disabled`"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title sidebar-link__print" href="../printable/index.html" rel="nofollow" alt="Print" title="Print" target="_blank">Print Section<img src="../../96ccbfac58b65e83657a220603e00abe.svg"/></a></div><div><div class="sidebar-item  sidebar-item--disabled"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title" href="../index.html">Migrate</a></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../5/index.html">To v5 from v4</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Preparations"><a href="../5/index.html#preparations">Preparations</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Upgrade webpack and its dependencies"><a href="../5/index.html#upgrade-webpack-and-its-dependencies">Upgrade webpack and its dependencies</a></li></ul></li><li class="sidebar-item__anchor" title="Changes to internals"><a href="../5/index.html#changes-to-internals">Changes to internals</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="getOptions method for Loaders"><a href="../5/index.html#getoptions-method-for-loaders">getOptions method for Loaders</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../4/index.html">To v4 from v3</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Node.js v4"><a href="../4/index.html#nodejs-v4">Node.js v4</a></li><li class="sidebar-item__anchor" title="CLI"><a href="../4/index.html#cli">CLI</a></li><li class="sidebar-item__anchor" title="Update plugins"><a href="../4/index.html#update-plugins">Update plugins</a></li><li class="sidebar-item__anchor" title="mode"><a href="../4/index.html#mode">mode</a></li><li class="sidebar-item__anchor" title="Deprecated/Removed plugins"><a href="../4/index.html#deprecatedremoved-plugins">Deprecated/Removed plugins</a></li><li class="sidebar-item__anchor" title="CommonsChunkPlugin"><a href="../4/index.html#commonschunkplugin">CommonsChunkPlugin</a></li><li class="sidebar-item__anchor" title="import() and CommonJS"><a href="../4/index.html#import-and-commonjs">import() and CommonJS</a></li><li class="sidebar-item__anchor" title="json and loaders"><a href="../4/index.html#json-and-loaders">json and loaders</a></li><li class="sidebar-item__anchor" title="module.loaders"><a href="../4/index.html#moduleloaders">module.loaders</a></li></ul></div></div><div><div class="sidebar-item sidebar-item--open "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="index.html">To v2 or v3 from v1</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="resolve.root, resolve.fallback, resolve.modulesDirectories"><a href="index.html#resolveroot-resolvefallback-resolvemodulesdirectories">resolve.root, resolve.fallback, resolve.modulesDirectories</a></li><li class="sidebar-item__anchor" title="resolve.extensions"><a href="index.html#resolveextensions">resolve.extensions</a></li><li class="sidebar-item__anchor" title="resolve.*"><a href="index.html#resolve">resolve.*</a></li><li class="sidebar-item__anchor" title="module.loaders is now module.rules"><a href="index.html#moduleloaders-is-now-modulerules">module.loaders is now module.rules</a></li><li class="sidebar-item__anchor" title="Chaining loaders"><a href="index.html#chaining-loaders">Chaining loaders</a></li><li class="sidebar-item__anchor" title="Automatic -loader module name extension removed"><a href="index.html#automatic--loader-module-name-extension-removed">Automatic -loader module name extension removed</a></li><li class="sidebar-item__anchor" title="json-loader is not required anymore"><a href="index.html#json-loader-is-not-required-anymore">json-loader is not required anymore</a></li><li class="sidebar-item__anchor" title="Loaders in configuration resolve relative to context"><a href="index.html#loaders-in-configuration-resolve-relative-to-context">Loaders in configuration resolve relative to context</a></li><li class="sidebar-item__anchor" title="module.preLoaders and module.postLoaders were removed:"><a href="index.html#modulepreloaders-and-modulepostloaders-were-removed">module.preLoaders and module.postLoaders were removed:</a></li><li class="sidebar-item__anchor" title="UglifyJsPlugin sourceMap"><a href="index.html#uglifyjsplugin-sourcemap">UglifyJsPlugin sourceMap</a></li><li class="sidebar-item__anchor" title="UglifyJsPlugin warnings"><a href="index.html#uglifyjsplugin-warnings">UglifyJsPlugin warnings</a></li><li class="sidebar-item__anchor" title="UglifyJsPlugin minimize loaders"><a href="index.html#uglifyjsplugin-minimize-loaders">UglifyJsPlugin minimize loaders</a></li><li class="sidebar-item__anchor" title="DedupePlugin has been removed"><a href="index.html#dedupeplugin-has-been-removed">DedupePlugin has been removed</a></li><li class="sidebar-item__anchor" title="BannerPlugin - breaking change"><a href="index.html#bannerplugin---breaking-change">BannerPlugin - breaking change</a></li><li class="sidebar-item__anchor" title="OccurrenceOrderPlugin is now on by default"><a href="index.html#occurrenceorderplugin-is-now-on-by-default">OccurrenceOrderPlugin is now on by default</a></li><li class="sidebar-item__anchor" title="ExtractTextWebpackPlugin - breaking change"><a href="index.html#extracttextwebpackplugin---breaking-change">ExtractTextWebpackPlugin - breaking change</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="ExtractTextPlugin.extract"><a href="index.html#extracttextpluginextract">ExtractTextPlugin.extract</a></li><li class="sidebar-item__anchor" title="new ExtractTextPlugin({options})"><a href="index.html#new-extracttextpluginoptions">new ExtractTextPlugin({options})</a></li></ul></li><li class="sidebar-item__anchor" title="Full dynamic requires now fail by default"><a href="index.html#full-dynamic-requires-now-fail-by-default">Full dynamic requires now fail by default</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Using custom arguments in CLI and configuration"><a href="index.html#using-custom-arguments-in-cli-and-configuration">Using custom arguments in CLI and configuration</a></li></ul></li><li class="sidebar-item__anchor" title="require.ensure and AMD require are asynchronous"><a href="index.html#requireensure-and-amd-require-are-asynchronous">require.ensure and AMD require are asynchronous</a></li><li class="sidebar-item__anchor" title="Loader configuration is through options"><a href="index.html#loader-configuration-is-through-options">Loader configuration is through options</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="What are options?"><a href="index.html#what-are-options">What are options?</a></li></ul></li><li class="sidebar-item__anchor" title="LoaderOptionsPlugin context"><a href="index.html#loaderoptionsplugin-context">LoaderOptionsPlugin context</a></li><li class="sidebar-item__anchor" title="debug"><a href="index.html#debug">debug</a></li><li class="sidebar-item__anchor" title="Code Splitting with ES2015"><a href="index.html#code-splitting-with-es2015">Code Splitting with ES2015</a></li><li class="sidebar-item__anchor" title="Dynamic expressions"><a href="index.html#dynamic-expressions">Dynamic expressions</a></li><li class="sidebar-item__anchor" title="Mixing ES2015 with AMD and CommonJS"><a href="index.html#mixing-es2015-with-amd-and-commonjs">Mixing ES2015 with AMD and CommonJS</a></li><li class="sidebar-item__anchor" title="Hints"><a href="index.html#hints">Hints</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Template strings"><a href="index.html#template-strings">Template strings</a></li><li class="sidebar-item__anchor" title="Configuration Promise"><a href="index.html#configuration-promise">Configuration Promise</a></li><li class="sidebar-item__anchor" title="Advanced loader matching"><a href="index.html#advanced-loader-matching">Advanced loader matching</a></li><li class="sidebar-item__anchor" title="More CLI options"><a href="index.html#more-cli-options">More CLI options</a></li></ul></li><li class="sidebar-item__anchor" title="Loader changes"><a href="index.html#loader-changes">Loader changes</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Cacheable"><a href="index.html#cacheable">Cacheable</a></li><li class="sidebar-item__anchor" title="Complex options"><a href="index.html#complex-options">Complex options</a></li></ul></li></ul></div></div><div class="sidebar__docs-version">You are reading webpack <!-- -->5<!-- --> documentation. Change here to:<ul><li><a rel="nofollow" href="https://v4.webpack.js.org">webpack <!-- -->4<!-- --> documentation</a></li></ul></div></div></nav><section class="page"><div class="page-links"><a class="page-links__link" href="https://github.com/webpack/webpack.js.org/edit/master/src/content/migrate/3.md">Edit Document<i class="page-links__icon icon-edit"></i></a><span class="page-links__gap">|</span><button class="page-links__link page-links__print as-link" title="Print this page">Print Document<img src="../../96ccbfac58b65e83657a220603e00abe.svg"/></button></div><div class="markdown"><h1>To v2 or v3 from v1</h1><div><p>The following sections describe the major changes from webpack 1 to 2.</p>
<blockquote class="tip">
<p>Note that there were far fewer changes between 2 and 3, so that migration shouldn't be too bad. If you are running into issues, please see <a href="https://github.com/webpack/webpack/releases">the changelog</a> for details.</p>
</blockquote>
<h2 id="resolveroot-resolvefallback-resolvemodulesdirectories"><code>resolve.root</code>, <code>resolve.fallback</code>, <code>resolve.modulesDirectories</code><a href="index.html#resolveroot-resolvefallback-resolvemodulesdirectories" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>These options were replaced by a single option <code>resolve.modules</code>. See <a href="../../configuration/resolve/index.html">resolving</a> for more usage.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> resolve: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   root: path.join(__dirname, "src")
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   modules: [
</span><span class="token prefix inserted">+</span><span class="token line">     path.join(__dirname, "src"),
</span><span class="token prefix inserted">+</span><span class="token line">     "node_modules"
</span><span class="token prefix inserted">+</span><span class="token line">   ]
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h2 id="resolveextensions"><code>resolve.extensions</code><a href="index.html#resolveextensions" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>This option no longer requires passing an empty string. This behavior was moved to <code>resolve.enforceExtension</code>. See <a href="../../configuration/resolve/index.html">resolving</a> for more usage.</p>
<h2 id="resolve"><code>resolve.*</code><a href="index.html#resolve" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Several APIs were changed here. Not listed in detail as it's not commonly used. See <a href="../../configuration/resolve/index.html">resolving</a> for details.</p>
<h2 id="moduleloaders-is-now-modulerules"><code>module.loaders</code> is now <code>module.rules</code><a href="index.html#moduleloaders-is-now-modulerules" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The old loader configuration was superseded by a more powerful rules system, which allows configuration of loaders and more.
For compatibility reasons, the old <code>module.loaders</code> syntax is still valid and the old names are parsed.
The new naming conventions are easier to understand and are a good reason to upgrade the configuration to using <code>module.rules</code>.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   loaders: [
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   rules: [
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.css$/,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       loaders: [
</span><span class="token prefix deleted">-</span><span class="token line">         "style-loader",
</span><span class="token prefix deleted">-</span><span class="token line">         "css-loader?modules=true"
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       use: [
</span><span class="token prefix inserted">+</span><span class="token line">         {
</span><span class="token prefix inserted">+</span><span class="token line">           loader: "style-loader"
</span><span class="token prefix inserted">+</span><span class="token line">         },
</span><span class="token prefix inserted">+</span><span class="token line">         {
</span><span class="token prefix inserted">+</span><span class="token line">           loader: "css-loader",
</span><span class="token prefix inserted">+</span><span class="token line">           options: {
</span><span class="token prefix inserted">+</span><span class="token line">             modules: true
</span><span class="token prefix inserted">+</span><span class="token line">           }
</span><span class="token prefix inserted">+</span><span class="token line">         }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       ]
</span><span class="token prefix unchanged"> </span><span class="token line">     },
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.jsx$/,
</span><span class="token prefix unchanged"> </span><span class="token line">       loader: "babel-loader", // Do not use "use" here
</span><span class="token prefix unchanged"> </span><span class="token line">       options: {
</span><span class="token prefix unchanged"> </span><span class="token line">         // ...
</span><span class="token prefix unchanged"> </span><span class="token line">       }
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h2 id="chaining-loaders">Chaining loaders<a href="index.html#chaining-loaders" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Like in webpack 1, loaders can be chained to pass results from loader to loader. Using the <a href="../../configuration/module/index.html#ruleuse">rule.use</a>
configuration option, <code>use</code> can be set to an array of loaders.
In webpack 1, loaders were commonly chained with <code>!</code>. This style is only supported using the legacy option <code>module.loaders</code>.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   loaders: [{
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   rules: [{
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     test: /\.less$/,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     loader: "style-loader!css-loader!less-loader"
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     use: [
</span><span class="token prefix inserted">+</span><span class="token line">       "style-loader",
</span><span class="token prefix inserted">+</span><span class="token line">       "css-loader",
</span><span class="token prefix inserted">+</span><span class="token line">       "less-loader"
</span><span class="token prefix inserted">+</span><span class="token line">     ]
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }]
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h2 id="automatic--loader-module-name-extension-removed">Automatic <code>-loader</code> module name extension removed<a href="index.html#automatic--loader-module-name-extension-removed" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>It is not possible anymore to omit the <code>-loader</code> extension when referencing loaders:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       use: [
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">         "style",
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">         "style-loader",
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">         "css",
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">         "css-loader",
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">         "less",
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">         "less-loader",
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       ]
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p>You can still opt-in to the old behavior with the <code>resolveLoader.moduleExtensions</code> configuration option, but this is not recommended.</p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> resolveLoader: {
</span><span class="token prefix inserted">+</span><span class="token line">   moduleExtensions: ["-loader"]
</span><span class="token prefix inserted">+</span><span class="token line"> }</span></span></code></pre>
<p>See <a href="https://github.com/webpack/webpack/issues/2986">#2986</a> for the reason behind this change.</p>
<h2 id="json-loader-is-not-required-anymore"><code>json-loader</code> is not required anymore<a href="index.html#json-loader-is-not-required-anymore" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>When no loader has been configured for a JSON file, webpack will automatically try to load the JSON
file with the <a href="https://github.com/webpack-contrib/json-loader"><code>json-loader</code></a>.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     {
</span><span class="token prefix deleted">-</span><span class="token line">       test: /\.json/,
</span><span class="token prefix deleted">-</span><span class="token line">       loader: "json-loader"
</span><span class="token prefix deleted">-</span><span class="token line">     }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p><a href="https://github.com/webpack/webpack/issues/3363">We decided to do this</a> in order to iron out environment differences
between webpack, node.js and browserify.</p>
<h2 id="loaders-in-configuration-resolve-relative-to-context">Loaders in configuration resolve relative to context<a href="index.html#loaders-in-configuration-resolve-relative-to-context" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>In <strong>webpack 1</strong>, configured loaders resolve relative to the matched file. However, in <strong>webpack 2</strong>, configured loaders resolve relative to the <code>context</code> option.</p>
<p>This solves some problems with duplicate modules caused by loaders when using <code>npm link</code> or referencing modules outside of the <code>context</code>.</p>
<p>You may remove some hacks to work around this:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       // ...
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       loader: require.resolve("my-loader")
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       loader: "my-loader"
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> resolveLoader: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   root: path.resolve(__dirname, "node_modules")
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h2 id="modulepreloaders-and-modulepostloaders-were-removed"><code>module.preLoaders</code> and <code>module.postLoaders</code> were removed:<a href="index.html#modulepreloaders-and-modulepostloaders-were-removed" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   preLoaders: [
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   rules: [
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.js$/,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       enforce: "pre",
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       loader: "eslint-loader"
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h2 id="uglifyjsplugin-sourcemap"><code>UglifyJsPlugin</code> sourceMap<a href="index.html#uglifyjsplugin-sourcemap" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <code>sourceMap</code> option of the <code>UglifyJsPlugin</code> now defaults to <code>false</code> instead of <code>true</code>. This means that if you are using source maps for minimized code or want correct line numbers for uglifyjs warnings, you need to set <code>sourceMap: true</code> for <code>UglifyJsPlugin</code>.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> devtool: "source-map",
</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">   new UglifyJsPlugin({
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     sourceMap: true
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   })
</span><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2 id="uglifyjsplugin-warnings"><code>UglifyJsPlugin</code> warnings<a href="index.html#uglifyjsplugin-warnings" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <code>compress.warnings</code> option of the <code>UglifyJsPlugin</code> now defaults to <code>false</code> instead of <code>true</code>.
This means that if you want to see uglifyjs warnings, you need to set <code>compress.warnings</code> to <code>true</code>.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> devtool: "source-map",
</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">   new UglifyJsPlugin({
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     compress: {
</span><span class="token prefix inserted">+</span><span class="token line">       warnings: true
</span><span class="token prefix inserted">+</span><span class="token line">     }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   })
</span><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2 id="uglifyjsplugin-minimize-loaders"><code>UglifyJsPlugin</code> minimize loaders<a href="index.html#uglifyjsplugin-minimize-loaders" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><code>UglifyJsPlugin</code> no longer switches loaders into minimize mode. The <code>minimize: true</code> setting needs to be passed via loader options in the long-term. See loader documentation for relevant options.</p>
<p>The minimize mode for loaders will be removed in webpack 3 or later.</p>
<p>To keep compatibility with old loaders, loaders can be switched to minimize mode via plugin:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   new webpack.LoaderOptionsPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">     minimize: true
</span><span class="token prefix inserted">+</span><span class="token line">   })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2 id="dedupeplugin-has-been-removed"><code>DedupePlugin</code> has been removed<a href="index.html#dedupeplugin-has-been-removed" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><code>webpack.optimize.DedupePlugin</code> isn't needed anymore. Remove it from your configuration.</p>
<h2 id="bannerplugin---breaking-change"><code>BannerPlugin</code> - breaking change<a href="index.html#bannerplugin---breaking-change" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><code>BannerPlugin</code> no longer accepts two parameters, but a single options object.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    new webpack.BannerPlugin('Banner', {raw: true, entryOnly: true});
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    new webpack.BannerPlugin({banner: 'Banner', raw: true, entryOnly: true});
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2 id="occurrenceorderplugin-is-now-on-by-default"><code>OccurrenceOrderPlugin</code> is now on by default<a href="index.html#occurrenceorderplugin-is-now-on-by-default" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <code>OccurrenceOrderPlugin</code> is now enabled by default and has been renamed (<code>OccurenceOrderPlugin</code> in webpack 1).
Thus make sure to remove the plugin from your configuration:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">   // webpack 1
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   new webpack.optimize.OccurenceOrderPlugin()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // webpack 2
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   new webpack.optimize.OccurrenceOrderPlugin()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2 id="extracttextwebpackplugin---breaking-change"><code>ExtractTextWebpackPlugin</code> - breaking change<a href="index.html#extracttextwebpackplugin---breaking-change" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><a href="https://github.com/webpack-contrib/extract-text-webpack-plugin">ExtractTextPlugin</a> requires version 2 to work with webpack 2.</p>
<p><code>npm install --save-dev extract-text-webpack-plugin</code></p>
<p>The configuration changes for this plugin are mainly syntactical.</p>
<h3 id="extracttextpluginextract"><code>ExtractTextPlugin.extract</code><a href="index.html#extracttextpluginextract" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-diff">module: {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">   {
</span><span class="token prefix unchanged"> </span><span class="token line">     test: /.css$/,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      loader: ExtractTextPlugin.extract("style-loader", "css-loader", { publicPath: "/dist" })
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      use: ExtractTextPlugin.extract({
</span><span class="token prefix inserted">+</span><span class="token line">        fallback: "style-loader",
</span><span class="token prefix inserted">+</span><span class="token line">        use: "css-loader",
</span><span class="token prefix inserted">+</span><span class="token line">        publicPath: "/dist"
</span><span class="token prefix inserted">+</span><span class="token line">      })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> ]
</span></span>}</code></pre>
<h3 id="new-extracttextpluginoptions"><code>new ExtractTextPlugin({options})</code><a href="index.html#new-extracttextpluginoptions" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-diff">plugins: [
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  new ExtractTextPlugin("bundle.css", { allChunks: true, disable: false })
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  new ExtractTextPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">    filename: "bundle.css",
</span><span class="token prefix inserted">+</span><span class="token line">    disable: false,
</span><span class="token prefix inserted">+</span><span class="token line">    allChunks: true
</span><span class="token prefix inserted">+</span><span class="token line">  })
</span></span>]</code></pre>
<h2 id="full-dynamic-requires-now-fail-by-default">Full dynamic requires now fail by default<a href="index.html#full-dynamic-requires-now-fail-by-default" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>A dependency with only an expression (i. e. <code>require(expr)</code>) will now create an empty context instead of the context of the complete directory.</p>
<p>Code like this should be refactored as it won't work with ES2015 modules. If this is not possible you can use the <code>ContextReplacementPlugin</code> to hint the compiler towards the correct resolving.</p>
<blockquote class="todo">
<p>Link to an article about dynamic dependencies.</p>
</blockquote>
<h3 id="using-custom-arguments-in-cli-and-configuration">Using custom arguments in CLI and configuration<a href="index.html#using-custom-arguments-in-cli-and-configuration" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>If you abused the CLI to pass custom arguments to the configuration like so:</p>
<p><code>webpack --custom-stuff</code></p>
<pre><code class="hljs language-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">var</span> customStuff <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'--custom-stuff'</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">/* ... */</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span></code></pre>
<p>You may notice that this is no longer allowed. The CLI is more strict now.</p>
<p>Instead there is an interface for passing arguments to the configuration. This should be used instead. Future tools may rely on this.</p>
<p><code>webpack --env.customStuff</code></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> customStuff <span class="token operator">=</span> env<span class="token punctuation">.</span>customStuff<span class="token punctuation">;</span>
  <span class="token comment">/* ... */</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>See <a href="../../api/cli/index.html">CLI</a>.</p>
<h2 id="requireensure-and-amd-require-are-asynchronous"><code>require.ensure</code> and AMD <code>require</code> are asynchronous<a href="index.html#requireensure-and-amd-require-are-asynchronous" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>These functions are now always asynchronous instead of calling their callback synchronously if the chunk is already loaded.</p>
<p><strong><code>require.ensure</code> now depends upon native <code>Promise</code>s. If using <code>require.ensure</code> in an environment that lacks them then you will need a polyfill.</strong></p>
<h2 id="loader-configuration-is-through-options">Loader configuration is through <code>options</code><a href="index.html#loader-configuration-is-through-options" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>You can <em>no longer</em> configure a loader with a custom property in the <code>webpack.config.js</code>. It must be done through the <code>options</code>. The following configuration with the <code>ts</code> property is no longer valid with webpack 2:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
      loader<span class="token operator">:</span> <span class="token string">'ts-loader'</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// does not work with webpack 2</span>
  ts<span class="token operator">:</span> <span class="token punctuation">{</span> transpileOnly<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="what-are-options">What are <code>options</code>?<a href="index.html#what-are-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Good question. Well, strictly speaking it's 2 possible things; both ways to configure a webpack loader. Classically <code>options</code> was called <code>query</code> and was a string which could be appended to the name of the loader. Much like a query string but actually with <a href="https://github.com/webpack/loader-utils#parsequery">greater powers</a>:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
      loader<span class="token operator">:</span> <span class="token string">'ts-loader?'</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> transpileOnly<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>But it can also be a separately specified object that's supplied alongside a loader:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
      loader<span class="token operator">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span>  <span class="token punctuation">{</span> transpileOnly<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="loaderoptionsplugin-context"><code>LoaderOptionsPlugin</code> context<a href="index.html#loaderoptionsplugin-context" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Some loaders need context information and read them from the configuration. This needs to be passed via loader options in the long-term. See loader documentation for relevant options.</p>
<p>To keep compatibility with old loaders, this information can be passed via plugin:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   new webpack.LoaderOptionsPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">     options: {
</span><span class="token prefix inserted">+</span><span class="token line">       context: __dirname
</span><span class="token prefix inserted">+</span><span class="token line">     }
</span><span class="token prefix inserted">+</span><span class="token line">   })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2 id="debug"><code>debug</code><a href="index.html#debug" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <code>debug</code> option switched loaders to debug mode in webpack 1. This needs to be passed via loader options in long-term. See loader documentation for relevant options.</p>
<p>The debug mode for loaders will be removed in webpack 3 or later.</p>
<p>To keep compatibility with old loaders, loaders can be switched to debug mode via a plugin:</p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> debug: true,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   new webpack.LoaderOptionsPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">     debug: true
</span><span class="token prefix inserted">+</span><span class="token line">   })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2 id="code-splitting-with-es2015">Code Splitting with ES2015<a href="index.html#code-splitting-with-es2015" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>In webpack 1, you could use <a href="../../api/module-methods/index.html#requireensure"><code>require.ensure()</code></a> as a method to lazily-load chunks for your application:</p>
<pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">require</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The ES2015 Loader spec defines <a href="../../api/module-methods/index.html#import-1"><code>import()</code></a> as method to load ES2015 Modules dynamically on runtime. webpack treats <code>import()</code> as a split-point and puts the requested module in a separate chunk. <code>import()</code> takes the module name as argument and returns a Promise.</p>
<pre><code class="hljs language-js"><span class="token keyword">function</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./module'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">module</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span>default<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Chunk loading failed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Good news: Failure to load a chunk can now be handled because they are <code>Promise</code> based.</p>
<h2 id="dynamic-expressions">Dynamic expressions<a href="index.html#dynamic-expressions" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>It's possible to pass a partial expression to <code>import()</code>. This is handled similar to expressions in CommonJS (webpack creates a <a href="../../plugins/context-replacement-plugin/index.html">context</a> with all possible files).</p>
<p><code>import()</code> creates a separate chunk for each possible module.</p>
<pre><code class="hljs language-js"><span class="token keyword">function</span> <span class="token function">route</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./routes/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/route</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">route</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">route<span class="token punctuation">.</span>Route</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// This creates a separate chunk for each possible route</span></code></pre>
<h2 id="mixing-es2015-with-amd-and-commonjs">Mixing ES2015 with AMD and CommonJS<a href="index.html#mixing-es2015-with-amd-and-commonjs" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>As for AMD and CommonJS you can freely mix all three module types (even within the same file). webpack behaves similar to babel and node-eps in this case:</p>
<pre><code class="hljs language-javascript"><span class="token comment">// CommonJS consuming ES2015 Module</span>
<span class="token keyword">var</span> book <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./book'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

book<span class="token punctuation">.</span>currentPage<span class="token punctuation">;</span>
book<span class="token punctuation">.</span><span class="token function">readPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
book<span class="token punctuation">.</span>default <span class="token operator">===</span> <span class="token string">'This is a book'</span><span class="token punctuation">;</span></code></pre>
<pre><code class="hljs language-javascript"><span class="token comment">// ES2015 Module consuming CommonJS</span>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span> <span class="token comment">// module.exports map to default</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> readFileSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span> <span class="token comment">// named exports are read from returned object+</span>

<span class="token keyword">typeof</span> fs<span class="token punctuation">.</span>readFileSync <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> readFileSync <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">;</span></code></pre>
<p>It is important to note that you will want to tell Babel to not parse these module symbols so webpack can use them. You can do this by setting the following in your <code>.babelrc</code> or <code>babel-loader</code> options.</p>
<p><strong>.babelrc</strong></p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">"es2015"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property">"modules"</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="hints">Hints<a href="index.html#hints" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>No need to change something, but opportunities</p>
<h3 id="template-strings">Template strings<a href="index.html#template-strings" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack now supports template strings in expressions. This means you can start using them in webpack constructs:</p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> require("./templates/" + name);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> require(`./templates/${name}`);</span></span></code></pre>
<h3 id="configuration-promise">Configuration Promise<a href="index.html#configuration-promise" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack now supports returning a <code>Promise</code> from the configuration file. This allows async processing in your configuration file.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">fetchLangs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">lang</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token constant">LANGUAGE</span><span class="token operator">:</span> lang <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="advanced-loader-matching">Advanced loader matching<a href="index.html#advanced-loader-matching" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack now supports more things to match on for loaders.</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        resource<span class="token operator">:</span> <span class="token regex">/filename/</span><span class="token punctuation">,</span> <span class="token comment">// matches "/path/filename.js"</span>
        resourceQuery<span class="token operator">:</span> <span class="token regex">/^\?querystring$/</span><span class="token punctuation">,</span> <span class="token comment">// matches "?querystring"</span>
        issuer<span class="token operator">:</span> <span class="token regex">/filename/</span><span class="token punctuation">,</span> <span class="token comment">// matches "/path/something.js" if requested from "/path/filename.js"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="more-cli-options">More CLI options<a href="index.html#more-cli-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>There are some new CLI options for you to use:</p>
<p><code>--define process.env.NODE_ENV="production"</code> See <a href="../../plugins/define-plugin/index.html"><code>DefinePlugin</code></a>.</p>
<p><code>--display-depth</code> displays the distance to the entry point for each module.</p>
<p><code>--display-used-exports</code> display info about which exports are used in a module.</p>
<p><code>--display-max-modules</code> sets the number for modules displayed in the output (defaults to 15).</p>
<p><code>-p</code> also defines <code>process.env.NODE_ENV</code> to <code>"production"</code> now.</p>
<h2 id="loader-changes">Loader changes<a href="index.html#loader-changes" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Changes only relevant for loader authors.</p>
<h3 id="cacheable">Cacheable<a href="index.html#cacheable" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Loaders are now cacheable by default. Loaders must opt-out if they are not cacheable.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // Cacheable loader
</span><span class="token prefix unchanged"> </span><span class="token line"> module.exports = function(source) {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   this.cacheable();
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return source;
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // Not cacheable loader
</span><span class="token prefix unchanged"> </span><span class="token line"> module.exports = function(source) {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   this.cacheable(false);
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return source;
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h3 id="complex-options">Complex options<a href="index.html#complex-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><strong>webpack 1</strong> only supports <code>JSON.stringify</code>-able options for loaders.</p>
<p><strong>webpack 2</strong> now supports any JS object as loader options.</p>
<p>Before webpack <a href="https://github.com/webpack/webpack/releases/tag/v2.2.1">2.2.1</a> (i.e. from 2.0.0 through 2.2.0), using complex options required using <code>ident</code> for the <code>options</code> object to allow its reference from other loaders. <strong>This was removed in 2.2.1</strong> and thus current migrations do not require any use of the <code>ident</code> key.</p>
<pre><code class="hljs language-diff">{
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> test: /\.ext/
</span><span class="token prefix unchanged"> </span><span class="token line"> use: {
</span><span class="token prefix unchanged"> </span><span class="token line">   loader: '...',
</span><span class="token prefix unchanged"> </span><span class="token line">   options: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     ident: 'id',
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     fn: () => require('./foo.js')
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}</code></pre>
</div><div class="adjacent-links"><div class="adjacent-links__prev"><div>« Previous</div><a class="adjacent-links__link" href="../4/index.html">To v4 from v3</a></div></div><div class="contributors__section"><hr/><h3>Contributors</h3><div class="contributors"><div class="contributors__list"><a class="contributor" href="https://github.com/sokra"><img alt="sokra" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->sokra</span></a><a class="contributor" href="https://github.com/jhnns"><img alt="jhnns" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->jhnns</span></a><a class="contributor" href="https://github.com/grgur"><img alt="grgur" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->grgur</span></a><a class="contributor" href="https://github.com/domfarolino"><img alt="domfarolino" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->domfarolino</span></a><a class="contributor" href="https://github.com/johnnyreilly"><img alt="johnnyreilly" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->johnnyreilly</span></a><a class="contributor" href="https://github.com/jouni-kantola"><img alt="jouni-kantola" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->jouni-kantola</span></a><a class="contributor" href="https://github.com/frederikprijck"><img alt="frederikprijck" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->frederikprijck</span></a><a class="contributor" href="https://github.com/chrisVillanueva"><img alt="chrisVillanueva" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->chrisVillanueva</span></a><a class="contributor" href="https://github.com/bebraw"><img alt="bebraw" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->bebraw</span></a><a class="contributor" href="https://github.com/howdy39"><img alt="howdy39" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->howdy39</span></a><a class="contributor" href="https://github.com/selbekk"><img alt="selbekk" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->selbekk</span></a><a class="contributor" href="https://github.com/ndelangen"><img alt="ndelangen" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->ndelangen</span></a><a class="contributor" href="https://github.com/EugeneHlushko"><img alt="EugeneHlushko" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->EugeneHlushko</span></a><a class="contributor" href="https://github.com/byzyk"><img alt="byzyk" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->byzyk</span></a></div></div></div></div></section><div class="gitter"><div class="gitter__button"><i class="gitter__icon icon-gitter"></i></div></div></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="../../guides/getting-started/index.html">Get Started</a><a class="footer__link" href="../../organization/index.html">Organization</a><a class="footer__link" href="../../starter-kits/index.html">Starter Kits</a><a class="footer__link" href="../../comparison/index.html">Comparison</a></section><section class="footer__middle"><a class="footer__icon" href="../../index.html"><img src="../../d19378a95ebe6b15d5ddea281138dcf4.svg" alt="webpack icon"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener" class="footer__link">Swag Store</a><a class="footer__link" href="../../glossary/index.html">Glossary</a><a class="footer__link" href="../../branding/index.html">Branding</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener" class="footer__link">Changelog</a><a class="footer__link footer__license" href="../../license/index.html"><img alt="Creative Commons License" src="../../7052446b5e67df4434f4031afd2f1497.svg"/><img alt="Creative Commons License" src="../../7ebb1b3901ce119694f65e04f6347ef5.svg"/></a></section></div></footer></div></div><script src="../../vendor.bundle.js"></script><script src="../../index.bundle.js"></script></body></html>