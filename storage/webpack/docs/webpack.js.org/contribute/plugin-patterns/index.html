<!DOCTYPE html><html lang="en" data-reactroot=""><head><meta charset="utf-8"/><meta name="theme-color" content="#2B3A42"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Plugin Patterns | webpack</title><meta name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:site_name" content="webpack"/><meta property="og:type" content="website"/><meta property="og:title" content="Plugin Patterns | webpack"/><meta property="og:description" name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:image" content="https://webpack.js.org/dcd5e077cf9f54ebe52d4f7ebe8c3080.png"/><meta property="twitter:card" content="summary"/><meta property="twitter:site" content="@webpack"/><meta property="twitter:creator" content="@webpack"/><meta property="twitter:domain" content="https://webpack.js.org/"/><link rel="icon" type="image/x-icon" href="../../bc3effb418df77da9e04825c48a58a49.ico"/><link rel="stylesheet" href="../../4ab073590147cad678f0.css"/><link rel="stylesheet" href="../../fb3c6085eb82c89290f8.css"/><link rel="manifest" href="../../manifest.json"/><link rel="canonical" href="index.html"/><meta name="mobile-web-app-capable" content="yes"/><link rel="icon" sizes="192x192" href="../../icon_192x192.png"/><link rel="icon" sizes="512x512" href="../../icon_512x512.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="webpack"/><link rel="apple-touch-icon-precomposed" href="../../icon_180x180.png"/><link rel="mask-icon" href="../../aad9d51e01a0dcc2caf5bee43dc8e647.svg" color="#465e69"/><meta name="msapplication-TileImage" content="/icon_150x150.png"/><meta name="msapplication-TileColor" content="#465e69"/></head><body><div id="root"><div class="site"><div class="site__header"><div class="notification-bar"><div class="container notification-bar__inner"><p>Sponsor webpack and get apparel from the <a href="https://webpack.threadless.com">official shop</a>! All proceeds go to our <a href="https://opencollective.com/webpack">open collective</a>!</p></div></div><header class="navigation   "><section class="navigation__inner"><button aria-label="Open menu" class="navigation__mobile"><svg viewBox="-62 138 25 25"><g><g><path d="M-60.2,140.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,141-61.2,140.2-60.2,140.2z"></path><path d="M-60.2,148.7h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,149.5-61.2,148.7-60.2,148.7z"></path><path d="M-60.2,157.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,158-61.2,157.2-60.2,157.2z"></path></g></g></svg></button><a class="navigation__logo" href="../../index.html"><img class="logo" src="../../e0b5805d423a4ec9473ee315250968b2.svg" alt="webpack logo"/></a><nav class="navigation__items"><a class="navigation__item  " href="../../concepts/index.html">Documentation</a><a class="navigation__item  navigation__item--active" href="../index.html">Contribute</a><a class="navigation__item  " href="../../vote/index.html">Vote</a><a href="https://medium.com/webpack" target="_blank" rel="noopener" class="navigation__item  ">Blog</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener" title="GitHub Repository" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-github"></i></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener" title="webpack on Twitter" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-twitter"></i></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener" title="webpack on Stack Overflow" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-stack-overflow"></i></a><span class="navigation__item navigation__item--icon"><nav class="dropdown navigation__languages"><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><img class="dropdown__language" alt="select language" src="../../57c717e75066b659cfe19dc2a643153c.svg"/><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="../../index.html"><span>English</span></a></li><li><a href="https://webpack.docschina.org/"><span lang="zh">中文</span></a></li></ul></div></nav></span></nav><div class="navigation-search "><input type="text" class="navigation-search__input" placeholder="Search this site..." value=""/><button aria-label="Hide search box" class="navigation-search__icon navigation-search__clear"><svg viewBox="-137 138 25 25"><g transform="translate(0,-952.36218)"><path d="M-131.3,1094.4c-0.4,0-0.9,0.1-1.2,0.5c-0.7,0.7-0.7,1.7,0,2.4l5.6,5.6l-5.6,5.6c-0.7,0.7-0.7,1.7,0,2.4 c0.7,0.7,1.7,0.7,2.4,0l5.6-5.6l5.6,5.6c0.7,0.7,1.7,0.7,2.4,0c0.7-0.7,0.7-1.7,0-2.4l-5.6-5.6l5.6-5.6c0.7-0.7,0.7-1.7,0-2.4 c-0.7-0.7-1.7-0.7-2.4,0l-5.6,5.6l-5.6-5.6C-130.5,1094.5-130.9,1094.4-131.3,1094.4L-131.3,1094.4z"></path></g></svg></button><button aria-label="Show search box" class="navigation-search__icon navigation-search__search"><svg viewBox="-137 138 25 25"><g><path d="M-114.6,162.6l-7.5-7.5c-0.6-0.6-0.6-1.6,0-2.1l0,0c0.6-0.6,1.6-0.6,2.1,0l7.5,7.5c0.6,0.6,0.6,1.6,0,2.1l0,0 C-113,163.1-114,163.1-114.6,162.6z"></path><path d="M-134.1,140.9c-3.9,3.9-3.9,10.2,0,14.1s10.2,3.9,14.1,0s3.9-10.2,0-14.1S-130.2,137-134.1,140.9z M-122.1,153 c-2.7,2.7-7.1,2.7-9.8,0s-2.7-7.1,0-9.8s7.1-2.7,9.8,0C-119.4,145.9-119.4,150.2-122.1,153z"></path></g></svg></button></div></section><div class="navigation-sub"><div class="navigation-sub__inner"></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener" class="sponsors__content"><img src="../../bf176a25b4f8227fea804854c98dc5e2.png"/><img src="../../d19378a95ebe6b15d5ddea281138dcf4.svg" style="width:100px"/><div style="margin-top:1em;font-size:2em;text-align:center;color:#535353">ag-grid is proud to partner with webpack</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="sidebar__shields"><a href="https://github.com/webpack/webpack/releases"><img alt="webpack shield" src="https://img.shields.io/github/package-json/v/webpack/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600"/></a></div><div class="sidebar-item sidebar-item--disabled`"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title sidebar-link__print" href="../printable/index.html" rel="nofollow" alt="Print" title="Print" target="_blank">Print Section<img src="../../96ccbfac58b65e83657a220603e00abe.svg"/></a></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../index.html">Contribute</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Developers"><a href="../index.html#developers">Developers</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="How Can I Help?"><a href="../index.html#how-can-i-help">How Can I Help?</a></li><li class="sidebar-item__anchor" title="Encouraging Employers"><a href="../index.html#encouraging-employers">Encouraging Employers</a></li><li class="sidebar-item__anchor" title="Your Contributions"><a href="../index.html#your-contributions">Your Contributions</a></li></ul></li><li class="sidebar-item__anchor" title="Executives"><a href="../index.html#executives">Executives</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Sponsorship"><a href="../index.html#sponsorship">Sponsorship</a></li><li class="sidebar-item__anchor" title="Anyone Else"><a href="../index.html#anyone-else">Anyone Else</a></li></ul></li><li class="sidebar-item__anchor" title="Pull requests"><a href="../index.html#pull-requests">Pull requests</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../writers-guide/index.html">Writer&#x27;s Guide</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Process"><a href="../writers-guide/index.html#process">Process</a></li><li class="sidebar-item__anchor" title="YAML Frontmatter"><a href="../writers-guide/index.html#yaml-frontmatter">YAML Frontmatter</a></li><li class="sidebar-item__anchor" title="Article Structure"><a href="../writers-guide/index.html#article-structure">Article Structure</a></li><li class="sidebar-item__anchor" title="Typesetting"><a href="../writers-guide/index.html#typesetting">Typesetting</a></li><li class="sidebar-item__anchor" title="Formatting"><a href="../writers-guide/index.html#formatting">Formatting</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Code"><a href="../writers-guide/index.html#code">Code</a></li><li class="sidebar-item__anchor" title="Lists"><a href="../writers-guide/index.html#lists">Lists</a></li><li class="sidebar-item__anchor" title="Tables"><a href="../writers-guide/index.html#tables">Tables</a></li><li class="sidebar-item__anchor" title="Configuration Properties"><a href="../writers-guide/index.html#configuration-properties">Configuration Properties</a></li><li class="sidebar-item__anchor" title="Quotes"><a href="../writers-guide/index.html#quotes">Quotes</a></li><li class="sidebar-item__anchor" title="Assumptions and simplicity"><a href="../writers-guide/index.html#assumptions-and-simplicity">Assumptions and simplicity</a></li><li class="sidebar-item__anchor" title="Configuration defaults and types"><a href="../writers-guide/index.html#configuration-defaults-and-types">Configuration defaults and types</a></li><li class="sidebar-item__anchor" title="Options shortlists and their typing"><a href="../writers-guide/index.html#options-shortlists-and-their-typing">Options shortlists and their typing</a></li><li class="sidebar-item__anchor" title="Adding links"><a href="../writers-guide/index.html#adding-links">Adding links</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../writing-a-loader/index.html">Writing a Loader</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Setup"><a href="../writing-a-loader/index.html#setup">Setup</a></li><li class="sidebar-item__anchor" title="Simple Usage"><a href="../writing-a-loader/index.html#simple-usage">Simple Usage</a></li><li class="sidebar-item__anchor" title="Complex Usage"><a href="../writing-a-loader/index.html#complex-usage">Complex Usage</a></li><li class="sidebar-item__anchor" title="Guidelines"><a href="../writing-a-loader/index.html#guidelines">Guidelines</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Simple"><a href="../writing-a-loader/index.html#simple">Simple</a></li><li class="sidebar-item__anchor" title="Chaining"><a href="../writing-a-loader/index.html#chaining">Chaining</a></li><li class="sidebar-item__anchor" title="Modular"><a href="../writing-a-loader/index.html#modular">Modular</a></li><li class="sidebar-item__anchor" title="Stateless"><a href="../writing-a-loader/index.html#stateless">Stateless</a></li><li class="sidebar-item__anchor" title="Loader Utilities"><a href="../writing-a-loader/index.html#loader-utilities">Loader Utilities</a></li><li class="sidebar-item__anchor" title="Loader Dependencies"><a href="../writing-a-loader/index.html#loader-dependencies">Loader Dependencies</a></li><li class="sidebar-item__anchor" title="Module Dependencies"><a href="../writing-a-loader/index.html#module-dependencies">Module Dependencies</a></li><li class="sidebar-item__anchor" title="Common Code"><a href="../writing-a-loader/index.html#common-code">Common Code</a></li><li class="sidebar-item__anchor" title="Absolute Paths"><a href="../writing-a-loader/index.html#absolute-paths">Absolute Paths</a></li><li class="sidebar-item__anchor" title="Peer Dependencies"><a href="../writing-a-loader/index.html#peer-dependencies">Peer Dependencies</a></li></ul></li><li class="sidebar-item__anchor" title="Testing"><a href="../writing-a-loader/index.html#testing">Testing</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../writing-a-plugin/index.html">Writing a Plugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Creating a Plugin"><a href="../writing-a-plugin/index.html#creating-a-plugin">Creating a Plugin</a></li><li class="sidebar-item__anchor" title="Basic plugin architecture"><a href="../writing-a-plugin/index.html#basic-plugin-architecture">Basic plugin architecture</a></li><li class="sidebar-item__anchor" title="Compiler and Compilation"><a href="../writing-a-plugin/index.html#compiler-and-compilation">Compiler and Compilation</a></li><li class="sidebar-item__anchor" title="Async event hooks"><a href="../writing-a-plugin/index.html#async-event-hooks">Async event hooks</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="tapAsync"><a href="../writing-a-plugin/index.html#tapasync">tapAsync</a></li></ul></li><li class="sidebar-item__anchor" title="Example"><a href="../writing-a-plugin/index.html#example">Example</a></li><li class="sidebar-item__anchor" title="Different Plugin Shapes"><a href="../writing-a-plugin/index.html#different-plugin-shapes">Different Plugin Shapes</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Synchronous Hooks"><a href="../writing-a-plugin/index.html#synchronous-hooks">Synchronous Hooks</a></li><li class="sidebar-item__anchor" title="Asynchronous Hooks"><a href="../writing-a-plugin/index.html#asynchronous-hooks">Asynchronous Hooks</a></li><li class="sidebar-item__anchor" title="Configuration defaults"><a href="../writing-a-plugin/index.html#configuration-defaults">Configuration defaults</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../writing-a-scaffold/index.html">Writing a Scaffold</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Quick Start"><a href="../writing-a-scaffold/index.html#quick-start">Quick Start</a></li><li class="sidebar-item__anchor" title="Setup"><a href="../writing-a-scaffold/index.html#setup">Setup</a></li><li class="sidebar-item__anchor" title="Make it interactive"><a href="../writing-a-scaffold/index.html#make-it-interactive">Make it interactive</a></li><li class="sidebar-item__anchor" title="Configuring Webpack"><a href="../writing-a-scaffold/index.html#configuring-webpack">Configuring Webpack</a></li><li class="sidebar-item__anchor" title="Dev Configurations"><a href="../writing-a-scaffold/index.html#dev-configurations">Dev Configurations</a></li><li class="sidebar-item__anchor" title="Some more configs"><a href="../writing-a-scaffold/index.html#some-more-configs">Some more configs</a></li><li class="sidebar-item__anchor" title="Basic Scaffold"><a href="../writing-a-scaffold/index.html#basic-scaffold">Basic Scaffold</a></li><li class="sidebar-item__anchor" title="Add more functionality"><a href="../writing-a-scaffold/index.html#add-more-functionality">Add more functionality</a></li><li class="sidebar-item__anchor" title="Create string with name"><a href="../writing-a-scaffold/index.html#create-string-with-name">Create string with name</a></li><li class="sidebar-item__anchor" title="Defining scopes"><a href="../writing-a-scaffold/index.html#defining-scopes">Defining scopes</a></li><li class="sidebar-item__anchor" title="Configuration nomenclature"><a href="../writing-a-scaffold/index.html#configuration-nomenclature">Configuration nomenclature</a></li><li class="sidebar-item__anchor" title="About .yo-rc.json"><a href="../writing-a-scaffold/index.html#about-yo-rcjson">About .yo-rc.json</a></li></ul></div></div><div><div class="sidebar-item sidebar-item--open "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="index.html">Plugin Patterns</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Exploring assets, chunks, modules, and dependencies"><a href="index.html#exploring-assets-chunks-modules-and-dependencies">Exploring assets, chunks, modules, and dependencies</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Monitoring the watch graph"><a href="index.html#monitoring-the-watch-graph">Monitoring the watch graph</a></li></ul></li><li class="sidebar-item__anchor" title="Changed chunks"><a href="index.html#changed-chunks">Changed chunks</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../release-process/index.html">Release Process</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Pull Requests"><a href="../release-process/index.html#pull-requests">Pull Requests</a></li><li class="sidebar-item__anchor" title="Releasing"><a href="../release-process/index.html#releasing">Releasing</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../debugging/index.html">Debugging</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Stats"><a href="../debugging/index.html#stats">Stats</a></li><li class="sidebar-item__anchor" title="DevTools"><a href="../debugging/index.html#devtools">DevTools</a></li></ul></div></div><div class="sidebar__docs-version">You are reading webpack <!-- -->5<!-- --> documentation. Change here to:<ul><li><a rel="nofollow" href="https://v4.webpack.js.org">webpack <!-- -->4<!-- --> documentation</a></li></ul></div></div></nav><section class="page"><div class="page-links"><a class="page-links__link" href="https://github.com/webpack/webpack.js.org/edit/master/src/content/contribute/plugin-patterns.md">Edit Document<i class="page-links__icon icon-edit"></i></a><span class="page-links__gap">|</span><button class="page-links__link page-links__print as-link" title="Print this page">Print Document<img src="../../96ccbfac58b65e83657a220603e00abe.svg"/></button></div><div class="markdown"><h1>Plugin Patterns</h1><div><p>Plugins grant unlimited opportunity to perform customizations within the webpack build system. This allows you to create custom asset types, perform unique build modifications, or even enhance the webpack runtime while using middleware. The following are some features of webpack that become useful while writing plugins.</p>
<h2 id="exploring-assets-chunks-modules-and-dependencies">Exploring assets, chunks, modules, and dependencies<a href="index.html#exploring-assets-chunks-modules-and-dependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>After a compilation is sealed, all structures within the compilation may be traversed.</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// Explore each chunk (build output):</span>
      compilation<span class="token punctuation">.</span>chunks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">chunk</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token comment">// Explore each module within the chunk (built inputs):</span>
        chunk<span class="token punctuation">.</span><span class="token function">getModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">module</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token comment">// Explore each source file path that was included into the module:</span>
          module<span class="token punctuation">.</span>buildInfo <span class="token operator">&#x26;&#x26;</span> module<span class="token punctuation">.</span>buildInfo<span class="token punctuation">.</span>fileDependencies <span class="token operator">&#x26;&#x26;</span> module<span class="token punctuation">.</span>buildInfo<span class="token punctuation">.</span>fileDependencies<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">filepath</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token comment">// we've learned a lot about the source structure now...</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Explore each asset filename generated by the chunk:</span>
        chunk<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">filename</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token comment">// Get the asset source for each file generated by the chunk:</span>
          <span class="token keyword">var</span> source <span class="token operator">=</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>filename<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MyPlugin<span class="token punctuation">;</span></code></pre>
<ul>
<li><code>compilation.modules</code>: A set of modules (built inputs) in the compilation. Each module manages the build of a raw file from your source library.</li>
</ul>
<blockquote class="warning">
<p><strong>Deprecation warning</strong>: Array functions will still work.</p>
</blockquote>
<ul>
<li><code>module.fileDependencies</code>: An array of source file paths included into a module. This includes the source JavaScript file itself (ex: <code>index.js</code>), and all dependency asset files (stylesheets, images, etc) that it has required. Reviewing dependencies is useful for seeing what source files belong to a module.</li>
<li><code>compilation.chunks</code>: A set of chunks (build outputs) in the compilation. Each chunk manages the composition of a final rendered assets.</li>
</ul>
<blockquote class="warning">
<p><strong>Deprecation warning</strong>: Array functions will still work.</p>
</blockquote>
<ul>
<li><code>chunk.getModules()</code>: An array of modules that are included into a chunk. By extension, you may look through each module's dependencies to see what raw source files fed into a chunk.</li>
<li><code>chunk.files</code>: A Set of output filenames generated by the chunk. You may access these asset sources from the <code>compilation.assets</code> table.</li>
</ul>
<h3 id="monitoring-the-watch-graph">Monitoring the watch graph<a href="index.html#monitoring-the-watch-graph" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>While running webpack middleware, each compilation includes a <code>fileDependencies</code> <code>Set</code> (what files are being watched) and a <code>fileTimestamps</code> <code>Map</code> that maps watched file paths to a timestamp. These are extremely useful for detecting what files have changed within the compilation:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>prevTimestamps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> changedFiles <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>compilation<span class="token punctuation">.</span>fileTimestamps<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
        <span class="token parameter">watchfile</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>prevTimestamps<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>watchfile<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startTime<span class="token punctuation">)</span> <span class="token operator">&#x3C;</span>
            <span class="token punctuation">(</span>compilation<span class="token punctuation">.</span>fileTimestamps<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>watchfile<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">Infinity</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>prevTimestamps <span class="token operator">=</span> compilation<span class="token punctuation">.</span>fileTimestamps<span class="token punctuation">;</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MyPlugin<span class="token punctuation">;</span></code></pre>
<p>You may also feed new file paths into the watch graph to receive compilation triggers when those files change. Add valid file paths into the <code>compilation.fileDependencies</code> <code>Set</code> to add them to the watched files.</p>
<blockquote class="tip">
<p>The <code>fileDependencies</code> <code>Set</code> is rebuilt in each compilation, so your plugin must add its own watched dependencies into each compilation to keep them under watch.</p>
</blockquote>
<blockquote class="warning">
<p>Since webpack 5, <code>compilation.fileDependencies</code>, <code>compilation.contextDependencies</code> and <code>compilation.missingDependencies</code> are now a <code>Set</code> instead of a <code>Sortable Set</code> and thus no longer sorted.</p>
</blockquote>
<h2 id="changed-chunks">Changed chunks<a href="index.html#changed-chunks" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Similar to the watch graph, it's fairly simple to monitor changed chunks (or modules, for that matter) within a compilation by tracking their hashes.</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>chunkVersions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> changedChunks <span class="token operator">=</span> compilation<span class="token punctuation">.</span>chunks<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">chunk</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> oldVersion <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>chunkVersions<span class="token punctuation">[</span>chunk<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>chunkVersions<span class="token punctuation">[</span>chunk<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> chunk<span class="token punctuation">.</span>hash<span class="token punctuation">;</span>
        <span class="token keyword">return</span> chunk<span class="token punctuation">.</span>hash <span class="token operator">!==</span> oldVersion<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MyPlugin<span class="token punctuation">;</span></code></pre>
</div><div class="adjacent-links"><div class="adjacent-links__prev"><div>« Previous</div><a class="adjacent-links__link" href="../writing-a-scaffold/index.html">Writing a Scaffold</a></div><div class="adjacent-links__next"><div class="adjacent-links__label--next">Next »</div><a class="adjacent-links__link" href="../release-process/index.html">Release Process</a></div></div><div class="contributors__section"><hr/><h3>Contributors</h3><div class="contributors"><div class="contributors__list"><a class="contributor" href="https://github.com/nveenjain"><img alt="nveenjain" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->nveenjain</span></a><a class="contributor" href="https://github.com/EugeneHlushko"><img alt="EugeneHlushko" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->EugeneHlushko</span></a><a class="contributor" href="https://github.com/benglynn"><img alt="benglynn" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->benglynn</span></a></div></div></div></div></section><div class="gitter"><div class="gitter__button"><i class="gitter__icon icon-gitter"></i></div></div></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="../../guides/getting-started/index.html">Get Started</a><a class="footer__link" href="../../organization/index.html">Organization</a><a class="footer__link" href="../../starter-kits/index.html">Starter Kits</a><a class="footer__link" href="../../comparison/index.html">Comparison</a></section><section class="footer__middle"><a class="footer__icon" href="../../index.html"><img src="../../d19378a95ebe6b15d5ddea281138dcf4.svg" alt="webpack icon"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener" class="footer__link">Swag Store</a><a class="footer__link" href="../../glossary/index.html">Glossary</a><a class="footer__link" href="../../branding/index.html">Branding</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener" class="footer__link">Changelog</a><a class="footer__link footer__license" href="../../license/index.html"><img alt="Creative Commons License" src="../../7052446b5e67df4434f4031afd2f1497.svg"/><img alt="Creative Commons License" src="../../7ebb1b3901ce119694f65e04f6347ef5.svg"/></a></section></div></footer></div></div><script src="../../vendor.bundle.js"></script><script src="../../index.bundle.js"></script></body></html>