<!DOCTYPE html><html lang="en" data-reactroot=""><head><meta charset="utf-8"/><meta name="theme-color" content="#2B3A42"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Writing a Plugin | webpack</title><meta name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:site_name" content="webpack"/><meta property="og:type" content="website"/><meta property="og:title" content="Writing a Plugin | webpack"/><meta property="og:description" name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:image" content="https://webpack.js.org/dcd5e077cf9f54ebe52d4f7ebe8c3080.png"/><meta property="twitter:card" content="summary"/><meta property="twitter:site" content="@webpack"/><meta property="twitter:creator" content="@webpack"/><meta property="twitter:domain" content="https://webpack.js.org/"/><link rel="icon" type="image/x-icon" href="../../bc3effb418df77da9e04825c48a58a49.ico"/><link rel="stylesheet" href="../../4ab073590147cad678f0.css"/><link rel="stylesheet" href="../../fb3c6085eb82c89290f8.css"/><link rel="manifest" href="../../manifest.json"/><link rel="canonical" href="index.html"/><meta name="mobile-web-app-capable" content="yes"/><link rel="icon" sizes="192x192" href="../../icon_192x192.png"/><link rel="icon" sizes="512x512" href="../../icon_512x512.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="webpack"/><link rel="apple-touch-icon-precomposed" href="../../icon_180x180.png"/><link rel="mask-icon" href="../../aad9d51e01a0dcc2caf5bee43dc8e647.svg" color="#465e69"/><meta name="msapplication-TileImage" content="/icon_150x150.png"/><meta name="msapplication-TileColor" content="#465e69"/></head><body><div id="root"><div class="site"><div class="site__header"><div class="notification-bar"><div class="container notification-bar__inner"><p>Sponsor webpack and get apparel from the <a href="https://webpack.threadless.com">official shop</a>! All proceeds go to our <a href="https://opencollective.com/webpack">open collective</a>!</p></div></div><header class="navigation   "><section class="navigation__inner"><button aria-label="Open menu" class="navigation__mobile"><svg viewBox="-62 138 25 25"><g><g><path d="M-60.2,140.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,141-61.2,140.2-60.2,140.2z"></path><path d="M-60.2,148.7h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,149.5-61.2,148.7-60.2,148.7z"></path><path d="M-60.2,157.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,158-61.2,157.2-60.2,157.2z"></path></g></g></svg></button><a class="navigation__logo" href="../../index.html"><img class="logo" src="../../e0b5805d423a4ec9473ee315250968b2.svg" alt="webpack logo"/></a><nav class="navigation__items"><a class="navigation__item  " href="../../concepts/index.html">Documentation</a><a class="navigation__item  navigation__item--active" href="../index.html">Contribute</a><a class="navigation__item  " href="../../vote/index.html">Vote</a><a href="https://medium.com/webpack" target="_blank" rel="noopener" class="navigation__item  ">Blog</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener" title="GitHub Repository" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-github"></i></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener" title="webpack on Twitter" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-twitter"></i></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener" title="webpack on Stack Overflow" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-stack-overflow"></i></a><span class="navigation__item navigation__item--icon"><nav class="dropdown navigation__languages"><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><img class="dropdown__language" alt="select language" src="../../57c717e75066b659cfe19dc2a643153c.svg"/><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="../../index.html"><span>English</span></a></li><li><a href="https://webpack.docschina.org/"><span lang="zh">中文</span></a></li></ul></div></nav></span></nav><div class="navigation-search "><input type="text" class="navigation-search__input" placeholder="Search this site..." value=""/><button aria-label="Hide search box" class="navigation-search__icon navigation-search__clear"><svg viewBox="-137 138 25 25"><g transform="translate(0,-952.36218)"><path d="M-131.3,1094.4c-0.4,0-0.9,0.1-1.2,0.5c-0.7,0.7-0.7,1.7,0,2.4l5.6,5.6l-5.6,5.6c-0.7,0.7-0.7,1.7,0,2.4 c0.7,0.7,1.7,0.7,2.4,0l5.6-5.6l5.6,5.6c0.7,0.7,1.7,0.7,2.4,0c0.7-0.7,0.7-1.7,0-2.4l-5.6-5.6l5.6-5.6c0.7-0.7,0.7-1.7,0-2.4 c-0.7-0.7-1.7-0.7-2.4,0l-5.6,5.6l-5.6-5.6C-130.5,1094.5-130.9,1094.4-131.3,1094.4L-131.3,1094.4z"></path></g></svg></button><button aria-label="Show search box" class="navigation-search__icon navigation-search__search"><svg viewBox="-137 138 25 25"><g><path d="M-114.6,162.6l-7.5-7.5c-0.6-0.6-0.6-1.6,0-2.1l0,0c0.6-0.6,1.6-0.6,2.1,0l7.5,7.5c0.6,0.6,0.6,1.6,0,2.1l0,0 C-113,163.1-114,163.1-114.6,162.6z"></path><path d="M-134.1,140.9c-3.9,3.9-3.9,10.2,0,14.1s10.2,3.9,14.1,0s3.9-10.2,0-14.1S-130.2,137-134.1,140.9z M-122.1,153 c-2.7,2.7-7.1,2.7-9.8,0s-2.7-7.1,0-9.8s7.1-2.7,9.8,0C-119.4,145.9-119.4,150.2-122.1,153z"></path></g></svg></button></div></section><div class="navigation-sub"><div class="navigation-sub__inner"></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener" class="sponsors__content"><img src="../../bf176a25b4f8227fea804854c98dc5e2.png"/><img src="../../d19378a95ebe6b15d5ddea281138dcf4.svg" style="width:100px"/><div style="margin-top:1em;font-size:2em;text-align:center;color:#535353">ag-grid is proud to partner with webpack</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="sidebar__shields"><a href="https://github.com/webpack/webpack/releases"><img alt="webpack shield" src="https://img.shields.io/github/package-json/v/webpack/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600"/></a></div><div class="sidebar-item sidebar-item--disabled`"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title sidebar-link__print" href="../printable/index.html" rel="nofollow" alt="Print" title="Print" target="_blank">Print Section<img src="../../96ccbfac58b65e83657a220603e00abe.svg"/></a></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../index.html">Contribute</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Developers"><a href="../index.html#developers">Developers</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="How Can I Help?"><a href="../index.html#how-can-i-help">How Can I Help?</a></li><li class="sidebar-item__anchor" title="Encouraging Employers"><a href="../index.html#encouraging-employers">Encouraging Employers</a></li><li class="sidebar-item__anchor" title="Your Contributions"><a href="../index.html#your-contributions">Your Contributions</a></li></ul></li><li class="sidebar-item__anchor" title="Executives"><a href="../index.html#executives">Executives</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Sponsorship"><a href="../index.html#sponsorship">Sponsorship</a></li><li class="sidebar-item__anchor" title="Anyone Else"><a href="../index.html#anyone-else">Anyone Else</a></li></ul></li><li class="sidebar-item__anchor" title="Pull requests"><a href="../index.html#pull-requests">Pull requests</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../writers-guide/index.html">Writer&#x27;s Guide</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Process"><a href="../writers-guide/index.html#process">Process</a></li><li class="sidebar-item__anchor" title="YAML Frontmatter"><a href="../writers-guide/index.html#yaml-frontmatter">YAML Frontmatter</a></li><li class="sidebar-item__anchor" title="Article Structure"><a href="../writers-guide/index.html#article-structure">Article Structure</a></li><li class="sidebar-item__anchor" title="Typesetting"><a href="../writers-guide/index.html#typesetting">Typesetting</a></li><li class="sidebar-item__anchor" title="Formatting"><a href="../writers-guide/index.html#formatting">Formatting</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Code"><a href="../writers-guide/index.html#code">Code</a></li><li class="sidebar-item__anchor" title="Lists"><a href="../writers-guide/index.html#lists">Lists</a></li><li class="sidebar-item__anchor" title="Tables"><a href="../writers-guide/index.html#tables">Tables</a></li><li class="sidebar-item__anchor" title="Configuration Properties"><a href="../writers-guide/index.html#configuration-properties">Configuration Properties</a></li><li class="sidebar-item__anchor" title="Quotes"><a href="../writers-guide/index.html#quotes">Quotes</a></li><li class="sidebar-item__anchor" title="Assumptions and simplicity"><a href="../writers-guide/index.html#assumptions-and-simplicity">Assumptions and simplicity</a></li><li class="sidebar-item__anchor" title="Configuration defaults and types"><a href="../writers-guide/index.html#configuration-defaults-and-types">Configuration defaults and types</a></li><li class="sidebar-item__anchor" title="Options shortlists and their typing"><a href="../writers-guide/index.html#options-shortlists-and-their-typing">Options shortlists and their typing</a></li><li class="sidebar-item__anchor" title="Adding links"><a href="../writers-guide/index.html#adding-links">Adding links</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../writing-a-loader/index.html">Writing a Loader</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Setup"><a href="../writing-a-loader/index.html#setup">Setup</a></li><li class="sidebar-item__anchor" title="Simple Usage"><a href="../writing-a-loader/index.html#simple-usage">Simple Usage</a></li><li class="sidebar-item__anchor" title="Complex Usage"><a href="../writing-a-loader/index.html#complex-usage">Complex Usage</a></li><li class="sidebar-item__anchor" title="Guidelines"><a href="../writing-a-loader/index.html#guidelines">Guidelines</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Simple"><a href="../writing-a-loader/index.html#simple">Simple</a></li><li class="sidebar-item__anchor" title="Chaining"><a href="../writing-a-loader/index.html#chaining">Chaining</a></li><li class="sidebar-item__anchor" title="Modular"><a href="../writing-a-loader/index.html#modular">Modular</a></li><li class="sidebar-item__anchor" title="Stateless"><a href="../writing-a-loader/index.html#stateless">Stateless</a></li><li class="sidebar-item__anchor" title="Loader Utilities"><a href="../writing-a-loader/index.html#loader-utilities">Loader Utilities</a></li><li class="sidebar-item__anchor" title="Loader Dependencies"><a href="../writing-a-loader/index.html#loader-dependencies">Loader Dependencies</a></li><li class="sidebar-item__anchor" title="Module Dependencies"><a href="../writing-a-loader/index.html#module-dependencies">Module Dependencies</a></li><li class="sidebar-item__anchor" title="Common Code"><a href="../writing-a-loader/index.html#common-code">Common Code</a></li><li class="sidebar-item__anchor" title="Absolute Paths"><a href="../writing-a-loader/index.html#absolute-paths">Absolute Paths</a></li><li class="sidebar-item__anchor" title="Peer Dependencies"><a href="../writing-a-loader/index.html#peer-dependencies">Peer Dependencies</a></li></ul></li><li class="sidebar-item__anchor" title="Testing"><a href="../writing-a-loader/index.html#testing">Testing</a></li></ul></div></div><div><div class="sidebar-item sidebar-item--open "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="index.html">Writing a Plugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Creating a Plugin"><a href="index.html#creating-a-plugin">Creating a Plugin</a></li><li class="sidebar-item__anchor" title="Basic plugin architecture"><a href="index.html#basic-plugin-architecture">Basic plugin architecture</a></li><li class="sidebar-item__anchor" title="Compiler and Compilation"><a href="index.html#compiler-and-compilation">Compiler and Compilation</a></li><li class="sidebar-item__anchor" title="Async event hooks"><a href="index.html#async-event-hooks">Async event hooks</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="tapAsync"><a href="index.html#tapasync">tapAsync</a></li></ul></li><li class="sidebar-item__anchor" title="Example"><a href="index.html#example">Example</a></li><li class="sidebar-item__anchor" title="Different Plugin Shapes"><a href="index.html#different-plugin-shapes">Different Plugin Shapes</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Synchronous Hooks"><a href="index.html#synchronous-hooks">Synchronous Hooks</a></li><li class="sidebar-item__anchor" title="Asynchronous Hooks"><a href="index.html#asynchronous-hooks">Asynchronous Hooks</a></li><li class="sidebar-item__anchor" title="Configuration defaults"><a href="index.html#configuration-defaults">Configuration defaults</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../writing-a-scaffold/index.html">Writing a Scaffold</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Quick Start"><a href="../writing-a-scaffold/index.html#quick-start">Quick Start</a></li><li class="sidebar-item__anchor" title="Setup"><a href="../writing-a-scaffold/index.html#setup">Setup</a></li><li class="sidebar-item__anchor" title="Make it interactive"><a href="../writing-a-scaffold/index.html#make-it-interactive">Make it interactive</a></li><li class="sidebar-item__anchor" title="Configuring Webpack"><a href="../writing-a-scaffold/index.html#configuring-webpack">Configuring Webpack</a></li><li class="sidebar-item__anchor" title="Dev Configurations"><a href="../writing-a-scaffold/index.html#dev-configurations">Dev Configurations</a></li><li class="sidebar-item__anchor" title="Some more configs"><a href="../writing-a-scaffold/index.html#some-more-configs">Some more configs</a></li><li class="sidebar-item__anchor" title="Basic Scaffold"><a href="../writing-a-scaffold/index.html#basic-scaffold">Basic Scaffold</a></li><li class="sidebar-item__anchor" title="Add more functionality"><a href="../writing-a-scaffold/index.html#add-more-functionality">Add more functionality</a></li><li class="sidebar-item__anchor" title="Create string with name"><a href="../writing-a-scaffold/index.html#create-string-with-name">Create string with name</a></li><li class="sidebar-item__anchor" title="Defining scopes"><a href="../writing-a-scaffold/index.html#defining-scopes">Defining scopes</a></li><li class="sidebar-item__anchor" title="Configuration nomenclature"><a href="../writing-a-scaffold/index.html#configuration-nomenclature">Configuration nomenclature</a></li><li class="sidebar-item__anchor" title="About .yo-rc.json"><a href="../writing-a-scaffold/index.html#about-yo-rcjson">About .yo-rc.json</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../plugin-patterns/index.html">Plugin Patterns</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Exploring assets, chunks, modules, and dependencies"><a href="../plugin-patterns/index.html#exploring-assets-chunks-modules-and-dependencies">Exploring assets, chunks, modules, and dependencies</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Monitoring the watch graph"><a href="../plugin-patterns/index.html#monitoring-the-watch-graph">Monitoring the watch graph</a></li></ul></li><li class="sidebar-item__anchor" title="Changed chunks"><a href="../plugin-patterns/index.html#changed-chunks">Changed chunks</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../release-process/index.html">Release Process</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Pull Requests"><a href="../release-process/index.html#pull-requests">Pull Requests</a></li><li class="sidebar-item__anchor" title="Releasing"><a href="../release-process/index.html#releasing">Releasing</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="../debugging/index.html">Debugging</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Stats"><a href="../debugging/index.html#stats">Stats</a></li><li class="sidebar-item__anchor" title="DevTools"><a href="../debugging/index.html#devtools">DevTools</a></li></ul></div></div><div class="sidebar__docs-version">You are reading webpack <!-- -->5<!-- --> documentation. Change here to:<ul><li><a rel="nofollow" href="https://v4.webpack.js.org">webpack <!-- -->4<!-- --> documentation</a></li></ul></div></div></nav><section class="page"><div class="page-links"><a class="page-links__link" href="https://github.com/webpack/webpack.js.org/edit/master/src/content/contribute/writing-a-plugin.md">Edit Document<i class="page-links__icon icon-edit"></i></a><span class="page-links__gap">|</span><button class="page-links__link page-links__print as-link" title="Print this page">Print Document<img src="../../96ccbfac58b65e83657a220603e00abe.svg"/></button></div><div class="markdown"><h1>Writing a Plugin</h1><div><p>Plugins expose the full potential of the webpack engine to third-party developers. Using staged build callbacks, developers can introduce their own behaviors into the webpack build process. Building plugins is a bit more advanced than building loaders, because you'll need to understand some of the webpack low-level internals to hook into them. Be prepared to read some source code!</p>
<h2 id="creating-a-plugin">Creating a Plugin<a href="index.html#creating-a-plugin" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>A plugin for webpack consists of:</p>
<ul>
<li>A named JavaScript function or a JavaScript class.</li>
<li>Defines <code>apply</code> method in its prototype.</li>
<li>Specifies an <a href="../../api/compiler-hooks/index.html">event hook</a> to tap into.</li>
<li>Manipulates webpack internal instance specific data.</li>
<li>Invokes webpack provided callback after functionality is complete.</li>
</ul>
<pre><code class="hljs language-javascript"><span class="token comment">// A JavaScript class.</span>
<span class="token keyword">class</span> <span class="token class-name">MyExampleWebpackPlugin</span> <span class="token punctuation">{</span>
  <span class="token comment">// Define `apply` as its prototype method which is supplied with compiler as its argument</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Specify the event hook to attach to</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span>
      <span class="token string">'MyExampleWebpackPlugin'</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'This is an example plugin!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Here’s the `compilation` object which represents a single build of assets:'</span><span class="token punctuation">,</span> compilation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Manipulate the build using the plugin API provided by webpack</span>
        compilation<span class="token punctuation">.</span><span class="token function">addModule</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="basic-plugin-architecture">Basic plugin architecture<a href="index.html#basic-plugin-architecture" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Plugins are instantiated objects with an <code>apply</code> method on their prototype. This <code>apply</code> method is called once by the webpack compiler while installing the plugin. The <code>apply</code> method is given a reference to the underlying webpack compiler, which grants access to compiler callbacks. A simple plugin is structured as follows:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">HelloWorldPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>done<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'Hello World Plugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>
      stats <span class="token comment">/* stats is passed as an argument when done hook is tapped.  */</span>
    <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> HelloWorldPlugin<span class="token punctuation">;</span></code></pre>
<p>Then to use the plugin, include an instance in your webpack configuration <code>plugins</code> array:</p>
<pre><code class="hljs language-javascript"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">var</span> HelloWorldPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'hello-world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... configuration settings here ...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HelloWorldPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> options<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Use <a href="https://github.com/webpack/schema-utils"><code>schema-utils</code></a> in order to validate the options being passed through the plugin options. Here is an example:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> validateOptions <span class="token keyword">from</span> <span class="token string">'schema-utils'</span><span class="token punctuation">;</span>

<span class="token comment">// schema for options object</span>
<span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'string'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldPlugin</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">validateOptions</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token string">'Hello World Plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<blockquote class="warning">
<p>The <a href="https://github.com/webpack/schema-utils"><code>schema-utils</code></a> API has changed in recent versions. webpack still uses the v1.0.0 release, and we ask that you do the same until further notice.</p>
</blockquote>
<h2 id="compiler-and-compilation">Compiler and Compilation<a href="index.html#compiler-and-compilation" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Among the two most important resources while developing plugins are the <a href="../../api/node/index.html#compiler-instance"><code>compiler</code></a> and <a href="../../api/compilation-hooks/index.html"><code>compilation</code></a> objects. Understanding their roles is an important first step in extending the webpack engine.</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">HelloCompilationPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Tap into compilation hook which gives compilation as argument to the callback function</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>compilation<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'HelloCompilationPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">compilation</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// Now we can tap into various hooks available through compilation</span>
      compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'HelloCompilationPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Assets are being optimized.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> HelloCompilationPlugin<span class="token punctuation">;</span></code></pre>
<p>The list of hooks available on the <code>compiler</code>, <code>compilation</code>, and other important objects, see the <a href="../../api/plugins/index.html">plugins API</a> docs.</p>
<h2 id="async-event-hooks">Async event hooks<a href="index.html#async-event-hooks" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Some plugin hooks are asynchronous. To tap into them, we can use <code>tap</code> method which will behave in synchronous manner or use one of <code>tapAsync</code> method or <code>tapPromise</code> method which are asynchronous methods.</p>
<h3 id="tapasync">tapAsync<a href="index.html#tapasync" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>When we use <code>tapAsync</code> method to tap into plugins, we need to call the callback function which is supplied as the last argument to our function.</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">HelloAsyncPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'HelloAsyncPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// Do something async...</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Done with async work...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> HelloAsyncPlugin<span class="token punctuation">;</span></code></pre>
<h4 id="tappromise">tapPromise<a href="index.html#tappromise" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>When we use <code>tapPromise</code> method to tap into plugins, we need to return a promise which resolves when our asynchronous task is completed.</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">HelloAsyncPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapPromise</span><span class="token punctuation">(</span><span class="token string">'HelloAsyncPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">compilation</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// return a Promise that resolves when we are done...</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Done with async work...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> HelloAsyncPlugin<span class="token punctuation">;</span></code></pre>
<h2 id="example">Example<a href="index.html#example" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Once we can latch onto the webpack compiler and each individual compilations, the possibilities become endless for what we can do with the engine itself. We can reformat existing files, create derivative files, or fabricate entirely new assets.</p>
<p>Let's write a simple example plugin that generates a new build file called <code>filelist.md</code>; the contents of which will list all of the asset files in our build. This plugin might look something like this:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">FileListPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// emit is asynchronous hook, tapping into it using tapAsync, you can use tapPromise/tap(synchronous) as well</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'FileListPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// Create a header string for the generated file:</span>
      <span class="token keyword">var</span> filelist <span class="token operator">=</span> <span class="token string">'In this build:\n\n'</span><span class="token punctuation">;</span>

      <span class="token comment">// Loop through all compiled assets,</span>
      <span class="token comment">// adding a new line item for each filename.</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> filename <span class="token keyword">in</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        filelist <span class="token operator">+=</span> <span class="token string">'- '</span> <span class="token operator">+</span> filename <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Insert this list into the webpack build as a new file asset:</span>
      compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span><span class="token string">'filelist.md'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">source</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> filelist<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">size</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> filelist<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> FileListPlugin<span class="token punctuation">;</span></code></pre>
<h2 id="different-plugin-shapes">Different Plugin Shapes<a href="index.html#different-plugin-shapes" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>A plugin can be classified into types based on the event hooks it taps into. Every event hook is pre-defined as synchronous or asynchronous or waterfall or parallel hook and hook is called internally using call/callAsync method. The list of hooks that are supported or can be tapped into are generally specified in <code>this.hooks</code> property.</p>
<p>For example:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span>hooks <span class="token operator">=</span> <span class="token punctuation">{</span>
  shouldEmit<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">SyncBailHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'compilation'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>It represents that the only hook supported is <code>shouldEmit</code> which is a hook of <code>SyncBailHook</code> type and the only parameter which will be passed to any plugin that taps into <code>shouldEmit</code> hook is <code>compilation</code>.</p>
<p>Various types of hooks supported are :</p>
<h3 id="synchronous-hooks">Synchronous Hooks<a href="index.html#synchronous-hooks" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<ul>
<li>
<p><strong>SyncHook</strong></p>
<ul>
<li>Defined as <code>new SyncHook([params])</code></li>
<li>Tapped into using <code>tap</code> method.</li>
<li>Called using <code>call(...params)</code> method.</li>
</ul>
</li>
<li>
<p><strong>Bail Hooks</strong></p>
<ul>
<li>Defined using <code>SyncBailHook[params]</code></li>
<li>Tapped into using <code>tap</code> method.</li>
<li>Called using <code>call(...params)</code> method.</li>
</ul>
<p>In these type of hooks, each of the plugin callbacks will be invoked one after the other with the specific <code>args</code>. If any value is returned except undefined by any plugin, then that value is returned by hook and no further plugin callback is invoked. Many useful events like <code>optimizeChunks</code>, <code>optimizeChunkModules</code> are SyncBailHooks.</p>
</li>
<li>
<p><strong>Waterfall Hooks</strong></p>
<ul>
<li>Defined using <code>SyncWaterfallHook[params]</code></li>
<li>Tapped into using <code>tap</code> method.</li>
<li>Called using <code>call(...params)</code> method</li>
</ul>
<p>Here each of the plugins are called one after the other with the arguments from the return value of the previous plugin. The plugin must take the order of its execution into account.
It must accept arguments from the previous plugin that was executed. The value for the first plugin is <code>init</code>. Hence at least 1 param must be supplied for waterfall hooks. This pattern is used in the Tapable instances which are related to the webpack templates like <code>ModuleTemplate</code>, <code>ChunkTemplate</code> etc.</p>
</li>
</ul>
<h3 id="asynchronous-hooks">Asynchronous Hooks<a href="index.html#asynchronous-hooks" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<ul>
<li>
<p><strong>Async Series Hook</strong></p>
<ul>
<li>Defined using <code>AsyncSeriesHook[params]</code></li>
<li>Tapped into using <code>tap</code>/<code>tapAsync</code>/<code>tapPromise</code> method.</li>
<li>Called using <code>callAsync(...params)</code> method</li>
</ul>
<p>The plugin handler functions are called with all arguments and a callback function with the signature <code>(err?: Error) -> void</code>. The handler functions are called in order of registration. <code>callback</code> is called after all the handlers are called.
This is also a commonly used pattern for events like <code>emit</code>, <code>run</code>.</p>
</li>
<li>
<p><strong>Async waterfall</strong> The plugins will be applied asynchronously in the waterfall manner.</p>
<ul>
<li>Defined using <code>AsyncWaterfallHook[params]</code></li>
<li>Tapped into using <code>tap</code>/<code>tapAsync</code>/<code>tapPromise</code> method.</li>
<li>Called using <code>callAsync(...params)</code> method</li>
</ul>
<p>The plugin handler functions are called with the current value and a callback function with the signature <code>(err: Error, nextValue: any) -> void.</code> When called <code>nextValue</code> is the current value for the next handler. The current value for the first handler is <code>init</code>. After all handlers are applied, callback is called with the last value. If any handler passes a value for <code>err</code>, the callback is called with this error and no more handlers are called.
This plugin pattern is expected for events like <code>before-resolve</code> and <code>after-resolve</code>.</p>
</li>
<li>
<p><strong>Async Series Bail</strong></p>
<ul>
<li>Defined using <code>AsyncSeriesBailHook[params]</code></li>
<li>Tapped into using <code>tap</code>/<code>tapAsync</code>/<code>tapPromise</code> method.</li>
<li>Called using <code>callAsync(...params)</code> method</li>
</ul>
</li>
<li>
<p><strong>Async Parallel</strong></p>
<ul>
<li>Defined using <code>AsyncParallelHook[params]</code></li>
<li>Tapped into using <code>tap</code>/<code>tapAsync</code>/<code>tapPromise</code> method.</li>
<li>Called using <code>callAsync(...params)</code> method</li>
</ul>
</li>
</ul>
<h3 id="configuration-defaults">Configuration defaults<a href="index.html#configuration-defaults" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack applies configuration defaults after plugins defaults are applied. This allows plugins to feature their own defaults and provides a way to create configuration preset plugins.</p>
</div><div class="adjacent-links"><div class="adjacent-links__prev"><div>« Previous</div><a class="adjacent-links__link" href="../writing-a-loader/index.html">Writing a Loader</a></div><div class="adjacent-links__next"><div class="adjacent-links__label--next">Next »</div><a class="adjacent-links__link" href="../writing-a-scaffold/index.html">Writing a Scaffold</a></div></div><div class="contributors__section"><hr/><h3>Contributors</h3><div class="contributors"><div class="contributors__list"><a class="contributor" href="https://github.com/tbroadley"><img alt="tbroadley" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->tbroadley</span></a><a class="contributor" href="https://github.com/nveenjain"><img alt="nveenjain" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->nveenjain</span></a><a class="contributor" href="https://github.com/iamakulov"><img alt="iamakulov" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->iamakulov</span></a><a class="contributor" href="https://github.com/byzyk"><img alt="byzyk" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->byzyk</span></a><a class="contributor" href="https://github.com/franjohn21"><img alt="franjohn21" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->franjohn21</span></a><a class="contributor" href="https://github.com/EugeneHlushko"><img alt="EugeneHlushko" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->EugeneHlushko</span></a><a class="contributor" href="https://github.com/snitin315"><img alt="snitin315" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->snitin315</span></a><a class="contributor" href="https://github.com/rahul3v"><img alt="rahul3v" src="../../cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->rahul3v</span></a></div></div></div></div></section><div class="gitter"><div class="gitter__button"><i class="gitter__icon icon-gitter"></i></div></div></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="../../guides/getting-started/index.html">Get Started</a><a class="footer__link" href="../../organization/index.html">Organization</a><a class="footer__link" href="../../starter-kits/index.html">Starter Kits</a><a class="footer__link" href="../../comparison/index.html">Comparison</a></section><section class="footer__middle"><a class="footer__icon" href="../../index.html"><img src="../../d19378a95ebe6b15d5ddea281138dcf4.svg" alt="webpack icon"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener" class="footer__link">Swag Store</a><a class="footer__link" href="../../glossary/index.html">Glossary</a><a class="footer__link" href="../../branding/index.html">Branding</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener" class="footer__link">Changelog</a><a class="footer__link footer__license" href="../../license/index.html"><img alt="Creative Commons License" src="../../7052446b5e67df4434f4031afd2f1497.svg"/><img alt="Creative Commons License" src="../../7ebb1b3901ce119694f65e04f6347ef5.svg"/></a></section></div></footer></div></div><script src="../../vendor.bundle.js"></script><script src="../../index.bundle.js"></script></body></html>